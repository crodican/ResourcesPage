<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recovery Resources</title>
    
    <!-- UIkit CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.6.22/css/uikit.min.css" />

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>

    <!-- UIkit JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.6.22/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.6.22/js/uikit-icons.min.js"></script>
</head>
<body>

    <!-- Hero Section -->
    <div class="uk-section uk-section-primary uk-light">
        <div class="uk-container">
            <h1>Recovery Resources</h1>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam scelerisque leo nec orci varius, nec tincidunt erat bibendum.</p>
        </div>
    </div>

    <!-- Breadcrumbs -->
    <div class="uk-container uk-margin">
        <ul class="uk-breadcrumb">
            <li><a href="#">Regional Recovery Hubs</a></li>
            <li><span>Recovery Resources</span></li>
        </ul>
    </div>

    <!-- Search Box -->
    <div class="uk-container uk-margin">
        <form class="uk-search uk-search-default">
            <span uk-search-icon></span>
            <input class="uk-search-input" type="search" placeholder="Search...">
        </form>
    </div>

    <!-- Filter Buttons -->
    <div class="uk-container uk-margin">
        <div class="uk-margin">
            <button class="uk-button uk-button-default" uk-filter-control="[data-county='Berks']">Berks</button>
            <button class="uk-button uk-button-default" uk-filter-control="[data-county='Chester']">Chester</button>
            <button class="uk-button uk-button-default" uk-filter-control="[data-county='Bucks']">Bucks</button>
            <button class="uk-button uk-button-default" uk-filter-control="[data-county='Delaware']">Delaware</button>
            <button class="uk-button uk-button-default" uk-filter-control="[data-county='Lancaster']">Lancaster</button>
            <button class="uk-button uk-button-default" uk-filter-control="[data-county='Montgomery']">Montgomery</button>
            <button class="uk-button uk-button-default" uk-filter-control="[data-county='Schuylkill']">Schuylkill</button>
        </div>
        <div class="uk-margin">
            <button class="uk-button uk-button-default" uk-filter-control="[data-domain='Recovery Support']">Recovery Support</button>
            <button class="uk-button uk-button-default" uk-filter-control="[data-domain='Family Support']">Family Support</button>
            <button class="uk-button uk-button-default" uk-filter-control="[data-domain='Housing']">Housing</button>
            <button class="uk-button uk-button-default" uk-filter-control="[data-domain='Transportation']">Transportation</button>
        </div>
    </div>

    <!-- Cards Grid -->
    <div class="uk-container uk-margin">
        <div class="uk-grid-small uk-child-width-1-3@m" uk-grid uk-filter="target: .js-filter">
            <!-- Cards will be populated here -->
        </div>
    </div>

    <script>
        $(document).ready(function() {
            // Fetch JSON data from the separate file
            $.getJSON('data.json', function(jsonData) {
                const container = $('.uk-grid-small');

                jsonData.forEach(item => {
                    const populations = item["Populations Served"].split(';').map(pop => `<span class="uk-label uk-label-danger">${pop.trim()}</span>`).join(' ');
                    const counties = item["County"].split(';').map(county => `<span class="uk-label uk-label-warning">${county.trim()}</span>`).join(' ');

                    const card = `
                        <div class="js-filter" data-county="${item.County}" data-domain="${item.Domain}">
                            <div class="uk-card uk-card-default">
                                <div class="uk-card-header">
                                    <div class="uk-grid-small uk-flex-middle" uk-grid>
                                        <div class="uk-width-expand">
                                            <span class="uk-label uk-label-primary">${item.Domain}</span>
                                        </div>
                                        <div class="uk-width-auto">
                                            <span class="uk-label uk-label-success">${item.Category}</span>
                                        </div>
                                    </div>
                                    <h3 class="uk-card-title">${item["Location Name"]}</h3>
                                   h5>
                                </div>
                                <div class="uk-card-body">
                                    ${item.Image ? `<img src="${item.Image}" alt="Logo" style="max-width:100px; max-height:100px; float:left; margin-right:10px;">` : ''}
                                    <p><strong>Phone:</strong> ${item.Phone}</p>
                                    <p>${item.Address}</p>
                                    <p>${item.City}, ${item.State} ${item["Zip Code"]}</p>
                                    <br />
                                    <p><strong>Populations Served:</strong> ${populations}</p>
                                    <br />
                                    <a href="${item.Website}" target="_blank">Website</a>
                                </div>
                                <div class="uk-card-footer uk-text-center">
                                    ${counties}
                                </div>
                            </div>
                        </div>
                    `;

                    container.append(card);
                });
            }).fail(function(jqxhr, textStatus, error) {
                console.error("Request Failed: " + textStatus + ", " + error);
            });
        });
    </script>
</body>
</html>