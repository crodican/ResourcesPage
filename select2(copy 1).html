<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://www.councilsepa.org/wp-content/uploads/2024/03/favicon.svg" sizes="32x32" />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,600;1,600&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Oxygen:wght@300;400;700&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://resourcespage.pages.dev/elevation-bootstrap.css" />
    <title>Resource Cards</title>
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Select2 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
    <!-- Select2 Bootstrap 5 Theme CSS -->
    <link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.1.1/dist/select2-bootstrap-5-theme.min.css" rel="stylesheet">
        <style>
            body {
                font-family: "Oxygen";
            }

            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                font-family: "Lora";
            }

            .card-body {
                overflow: hidden;
                word-wrap: break-word;
            }

            .badge {
                display: inline-block;
                margin: 2px 0;
            }
            kbd {
                font-family: "Space Mono", serif;
                font-weight: 700;
                font-style: normal;
                color: slateblue; /* Text color */
                background-color: white; /* Background color */
                padding: 2px 8px; /* Optional: Adds some padding */
                border-radius: 3px; /* Optional: Rounds the corners */
            }

            .kbd {
                @media (width < 768px) {
                    display: none;
                }
            }

            .form-control:focus {
                background-color: var(--bg-gray-subtle);
                box-shadow: 0 0 0 0.25rem hsla(267, 54%, 35%, 0.5); /* Optional: Change the box shadow color */
            }

            .form-control:focus::placeholder {
                color: transparent; /* Change this to your desired placeholder text color when focused */
            }

            .reflection {
                position: relative;
                display: inline-block;
            }

            .reflection::after {
                content: attr(data-text);
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                height: 100%;
                transform: scaleY(-1);
                opacity: 0.5;
                pointer-events: none;
            }

            .map-modal {
                position: fixed;
                top: 180px;
                height: var(100vh - 172px);
                @media (width < 576px) {
                    width: 100vw !important;
                    border-radius: 0;
                }
                
            }

            .js-badge {
                cursor: pointer;
            }

            .navbar-nav {
                display: flex;
                flex-direction: row;
                align-items: center;
            }

            .navbar {
                background-color: #ffc0cb; /* Pink background */
            }

            .nav-link {
                background-color: #f8f9fa; /* Light background for dropdown buttons */
            }

            .dropdown-menu {
                position: absolute;
                will-change: transform;
            }

            .breadcrumb {
                --bs-breadcrumb-padding-x: 0;
                --bs-breadcrumb-padding-y: 0;
                --bs-breadcrumb-margin-bottom: 1rem;
                --bs-breadcrumb-bg: ;
                --bs-breadcrumb-border-radius: ;
                --bs-breadcrumb-divider-color: var(--bs-secondary-color);
                --bs-breadcrumb-item-padding-x: 0.5rem;
                --bs-breadcrumb-item-active-color: var(--bs-secondary-color);
                display: flex;
                flex-wrap: wrap;
                padding: var(--bs-breadcrumb-padding-y) var(--bs-breadcrumb-padding-x);
                margin-bottom: var(--bs-breadcrumb-margin-bottom);
                font-size: var(--bs-breadcrumb-font-size);
                list-style: none;
                background-color: var(--bs-breadcrumb-bg);
                border-radius: var(--bs-breadcrumb-border-radius);
            }

            .cardbreadcrumb-item + .cardbreadcrumb-item {
                padding-left: var(--bs-breadcrumb-item-padding-x);
            }
            .cardbreadcrumb-item + .cardbreadcrumb-item::before {
                float: left;
                padding-right: var(--bs-breadcrumb-item-padding-x);
                color: var(--bs-breadcrumb-divider-color);
            }
            .cardbreadcrumb-item.active {
                color: var(--bs-breadcrumb-item-active-color);
            }
            
            .accordion-body {
                padding: 5px 0 !important;
            }
            
            .accordion-button {
                align-items: flex-start !important;
            }
            
            .accordion-button:not(.collapsed) {
                color: #ffffff !important;
                background-color: #55298a !important;
            }
            
            .btn-outline-primary {
                color: #55298a !important;
                border-color: #55298a !important;
            }
            
            .btn-check:checked+.btn, .btn.active, .btn.show, .btn:first-child:active, :not(.btn-check)+.btn:active {
                background-color: #55298a;
                color: white !important;
            }
            
            .br-35-5-5-5 { border-radius: 35px 5px 35px 5px; }
            .br-5-35-5-5 { border-radius: 5px 35px 5px 5px; }
            .br-5-5-35-5 { border-radius: 5px 5px 35px 5px; }
            .br-5-5-5-35 { border-radius: 5px 5px 5px 35px; }
            .br-35-35-5-5 { border-radius: 35px 35px 5px 5px; }
            .br-35-5-35-5 { border-radius: 35px 5px 35px 5px; }
            .br-35-5-5-35 { border-radius: 35px 5px 5px 5px; }
            .br-5-35-35-5 { border-radius: 5px 35px 35px 5px; }
            .br-5-5-35-35 { border-radius: 5px 5px 35px 35px; }
            .br-5-35-35-35 { border-radius: 5px 35px 35px 35px; }
            .br-35-5-35-35 { border-radius: 35px 5px 35px 35px; }
            .br-35-35-5-35 { border-radius: 35px 35px 5px 35px; }
            .br-35-35-35-5 { border-radius: 35px 35px 35px 5px; }
            .br-5-35-5-35 { border-radius: 5px 35px 5px 35px; }
            
            .searchButton {
                @media (width < 576px) {
                    padding-right: 10px !important;
                    padding-left: 10px !important;
                }
            }
            
            .modal-content {
                position: fixed;
                left: 0;
            }
            .card-sidenav {
                background-color: #55298a;
                color: white !important;
                max-width: 70px;
            }
            
            .card-sidenav a {
                color: white !important;
                font-size: 36px;
                border-radius: 0;
            }
            
            .card-sidenav a:hover {
                background-color: aquamarine;
                color: black;
            }
            
            .cardImage {
                max-height: 200px !important;
                width: auto !important;
                align-self: center;
                position: absolute;
                @media (width < 768px) {
                    position: static;
                }
            }
        </style>
</head>
<body class="bg-success-subtle">
    <div class="container mt-5">
        <div class="row mb-4">
            <div class="col-12">
                <select id="filter-select" class="form-select" multiple="multiple">
                    <optgroup label="Counties" style="overflow: visible">
                        <option>Philadelpia</option>
                        <option>Berks</option>
                        <option>Bucks</option>
                        <option>Chester</option>
                        <option>Delaware</option>
                        <option>Lancaster</option>
                        <option>Montgomery</option>
                        <option>Schuylkill</option>
                    </optgroup>
                    <optgroup label="Populations Served">
                        <option>Men</option>
                        <option>Women</option>
                        <option>Children</option>
                        <option>Adolescents</option>
                    </optgroup>
                    <optgroup label="Domains">
                        <option>Recovery Support</option>
                        <option>Family Support</option>
                        <option>Housing</option>
                        <option>Transportation</option>
                    </optgroup>
                </select>
            </div>
        </div>
        <div class="row" id="resource-cards-container">
            <!-- Cards will be appended here -->
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Select2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <!-- Include JSON data -->
    <script src="https://resourcespage.pages.dev/resourcesData.js"></script>
    <script>
        $(document).ready(function() {
            // Initialize Select2
            $('#filter-select').select2({
                theme: 'bootstrap-5',
                width: $( this ).data( 'width' ) ? $( this ).data( 'width' ) : $( this ).hasClass( 'w-100' ) ? '100%' : 'style',
                placeholder: $(this).data('placeholder'),
                closeOnSelect: true,
                allowClear: true,
            });

            // Function to create cards
            function createCard(item) {
                const populations = item["Populations Served"].split(';').join(', ');
                const counties = item.County;
                const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${item.Latitude},${item.Longitude}`;
                const card = `
                    <div class="col-12 js-filter-item" data-county="${item.County}" data-domain="${item.Domain}" data-category="${item.Category}" data-population="${item["Populations Served"]}">
                        <div class="card shadow-lg text-bg-white mb-4">
                            <div class="row no-gutters m-0">
                                <div class="card-sidenav col-2 d-flex flex-column justify-content-between align-items-center p-0">
                                    <a href="${item.Website}" class="btn d-flex align-items-center justify-content-center flex-grow-1 w-100 text-white"> <i class="bi bi-globe"></i> </a>
                                    <a href="tel:${item.Phone}" class="btn d-flex align-items-center justify-content-center flex-grow-1 w-100 text-white"> <i class="bi bi-telephone-fill"></i> </a>
                                    <a href="${googleMapsUrl}" class="btn d-flex align-items-center justify-content-center flex-grow-1 w-100 text-white"> <i class="bi bi-geo-alt-fill"></i> </a>
                                </div>
                                <div class="card-body col-10 p-4">
                                    <h3 class="text-secondary" style="font-weight:400;margin-bottom:0;line-height:1.2em;font-size:36px">${item["Location Name"]}</h3>
                                    <h5 style="font-weight:100;margin-top:0;font-size:18px">${item.Organization}</h5>
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item">
                                                <span class="badge text-black bg-pink py-2 my-1 js-badge" data-filter="domain" data-value="${item.Domain}">
                                                ${item.Domain}
                                                </span>
                                            </li>
                                            <li class="breadcrumb-item">
                                                <span class="badge text-black bg-pink py-2 my-1 js-badge" data-filter="category" data-value="${item.Category}">
                                                ${item.Category}
                                                </span>
                                            </li>
                                        </ol>
                                    </nav>
                                    <div class="row d-flex justify-content-end position-relative">
                                    ${item.Image ? `<img src="${item.Image}" alt="Logo" style="width:200px; height:auto; align-self: center; position: absolute">` : ""}
                                    </div>
                                    <p><strong>Phone:</strong> ${item.Phone}</p>
                                    <p>${item.Address}<br />${item.City}, ${item.State} ${item["Zip Code"]}</p>
                                    <p><strong>Populations Served:</strong> ${populations}</p>
                                    <p><strong>Counties Served:</strong> ${counties}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                $("#resource-cards-container").append(card);
            }

            // Function to filter cards
            function filterCards() {
                const selectedFilters = $('#filter-select').val();
                $('.js-filter-item').each(function() {
                    const item = $(this);
                    const itemCounties = item.data('county').split(';');
                    const itemPopulations = item.data('population').split(';');
                    const itemDomains = item.data('domain').split(';');
                    const itemCategories = item.data('category').split(';');
                    const matches = selectedFilters.every(filter => 
                        itemCounties.includes(filter) || 
                        itemPopulations.includes(filter) || 
                        itemDomains.includes(filter) || 
                        itemCategories.includes(filter)
                    );
                    if (matches) {
                        item.show();
                    } else {
                        item.hide();
                    }
                });
            }

            // Load JSON data and create cards
            jsonData.forEach(item => {
                createCard(item);
            });

            // Filter cards on select change
            $('#filter-select').on('change', function() {
                filterCards();
            });

            // Initial filter to hide all cards
            filterCards();
        });
    </script>
</body>
</html>