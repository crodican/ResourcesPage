<!doctype html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Resources</title>
        <link rel="icon" href="https://www.councilsepa.org/wp-content/uploads/2024/03/favicon.svg" sizes="32x32" />
        <!-- Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,600;1,600&amp;display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Oxygen:wght@300;400;700&amp;display=swap" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet" />
        <link rel="stylesheet" href="elevation-bootstrap.css" />
        <!-- Bootstrap Icons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" integrity="sha512-dPXYcDub/aeb08c63jRq/k6GaKccl256JQy/AnOq7CAnEZ9FzSL9wSbcZkMp4R26vBsMLFYH4kQ67/bbV8XaCQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- Bootstrap 5.1.3 CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- Bootstrap Grid CSS -->
        <link rel="stylesheet" href="bs-grid.css" />
        <!-- Custom Colors CSS -->
        <link rel="stylesheet" href="https://resourcespage.pages.dev/customColors.css" />
        <style>
            body {
                font-family: "Oxygen";
            }

            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                font-family: "Lora";
            }

            .card-body {
                overflow: hidden;
                word-wrap: break-word;
            }

            .badge {
                display: inline-block;
                margin: 2px 0;
            }
            kbd {
                font-family: "Space Mono", serif;
                font-weight: 700;
                font-style: normal;
                color: slateblue; /* Text color */
                background-color: white; /* Background color */
                padding: 2px 8px; /* Optional: Adds some padding */
                border-radius: 3px; /* Optional: Rounds the corners */
            }

            .kbd {
                @media (width < 768px) {
                    display: none;
                }
            }

            .form-control:focus {
                background-color: var(--bg-gray-subtle);
                box-shadow: 0 0 0 0.25rem hsla(267, 54%, 35%, 0.5); /* Optional: Change the box shadow color */
            }

            .form-control:focus::placeholder {
                color: transparent; /* Change this to your desired placeholder text color when focused */
            }

            .reflection {
                position: relative;
                display: inline-block;
            }

            .reflection::after {
                content: attr(data-text);
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                height: 100%;
                transform: scaleY(-1);
                opacity: 0.5;
                pointer-events: none;
            }

            .map-modal {
                position: fixed;
                top: 180px;
                height: var(100vh - 172px);
                @media (width < 576px) {
                    width: 100vw !important;
                    border-radius: 0;
                }
                
            }

            .js-badge {
                cursor: pointer;
            }

            .navbar-nav {
                display: flex;
                flex-direction: row;
                align-items: center;
            }

            .navbar {
                background-color: #ffc0cb; /* Pink background */
            }

            .nav-link {
                background-color: #f8f9fa; /* Light background for dropdown buttons */
            }

            .dropdown-menu {
                position: absolute;
                will-change: transform;
            }

            .breadcrumb {
                --bs-breadcrumb-padding-x: 0;
                --bs-breadcrumb-padding-y: 0;
                --bs-breadcrumb-margin-bottom: 1rem;
                --bs-breadcrumb-bg: ;
                --bs-breadcrumb-border-radius: ;
                --bs-breadcrumb-divider-color: var(--bs-secondary-color);
                --bs-breadcrumb-item-padding-x: 0.5rem;
                --bs-breadcrumb-item-active-color: var(--bs-secondary-color);
                display: flex;
                flex-wrap: wrap;
                padding: var(--bs-breadcrumb-padding-y) var(--bs-breadcrumb-padding-x);
                margin-bottom: var(--bs-breadcrumb-margin-bottom);
                font-size: var(--bs-breadcrumb-font-size);
                list-style: none;
                background-color: var(--bs-breadcrumb-bg);
                border-radius: var(--bs-breadcrumb-border-radius);
            }

            .cardbreadcrumb-item + .cardbreadcrumb-item {
                padding-left: var(--bs-breadcrumb-item-padding-x);
            }
            .cardbreadcrumb-item + .cardbreadcrumb-item::before {
                float: left;
                padding-right: var(--bs-breadcrumb-item-padding-x);
                color: var(--bs-breadcrumb-divider-color);
            }
            .cardbreadcrumb-item.active {
                color: var(--bs-breadcrumb-item-active-color);
            }
            
            .accordion-body {
                padding: 5px 0 !important;
            }
            
            .accordion-button {
                align-items: flex-start !important;
            }
            
            .accordion-button:not(.collapsed) {
                color: #ffffff !important;
                background-color: #55298a !important;
            }
            
            .btn-outline-primary {
                color: #55298a !important;
                border-color: #55298a !important;
            }
            
            .btn-check:checked+.btn, .btn.active, .btn.show, .btn:first-child:active, :not(.btn-check)+.btn:active {
                background-color: #55298a;
                color: white !important;
            }
            
            .br-35-5-5-5 { border-radius: 35px 5px 35px 5px; }
            .br-5-35-5-5 { border-radius: 5px 35px 5px 5px; }
            .br-5-5-35-5 { border-radius: 5px 5px 35px 5px; }
            .br-5-5-5-35 { border-radius: 5px 5px 5px 35px; }
            .br-35-35-5-5 { border-radius: 35px 35px 5px 5px; }
            .br-35-5-35-5 { border-radius: 35px 5px 35px 5px; }
            .br-35-5-5-35 { border-radius: 35px 5px 5px 5px; }
            .br-5-35-35-5 { border-radius: 5px 35px 35px 5px; }
            .br-5-5-35-35 { border-radius: 5px 5px 35px 35px; }
            .br-5-35-35-35 { border-radius: 5px 35px 35px 35px; }
            .br-35-5-35-35 { border-radius: 35px 5px 35px 35px; }
            .br-35-35-5-35 { border-radius: 35px 35px 5px 35px; }
            .br-35-35-35-5 { border-radius: 35px 35px 35px 5px; }
            .br-5-35-5-35 { border-radius: 5px 35px 5px 35px; }
            
            .searchButton {
                @media (width < 576px) {
                    padding-right: 10px !important;
                    padding-left: 10px !important;
                }
            }
            
            .modal-content {
                position: fixed;
                left: 0;
            }
            .card-sidenav {
                max-width: 70px;
                border-radius: 5px 0 0 5px;
            }
            
            .card-sidenav a {
                background-color: #55298a;
                color: white !important;
                font-size: 36px;
            }
            
            .card-sidenav a:hover {
                background-color: aquamarine;
                color: #55298a !important;
                overflow: hidden;
            }

            .card-sidenav a:nth-of-type(1) {
                border-radius: 5px 0 0 0;
            }

            .card-sidenav a:nth-of-type(2) {
                border-radius: 0;
            }

            .card-sidenav a:nth-of-type(3) {
                border-radius: 0 0 0 5px;
            }
            
            .cardImage {
                max-height: 200px !important;
                width: auto !important;
                align-self: center;
                position: absolute;
                @media (width < 768px) {
                    position: static;
                }
            }
        </style>
    </head>
    <body class="bg-success-subtle">
        <div class="container-fluid p-5 flex-grow-1 d-flex flex-column flex-sm-row overflow-auto">
            <div class="row flex-grow-sm-1 flex-grow-0">
                <div class="mb-3" id="resource-header">
                    <span id="resource-count"></span>
                </div>
                <div id="resource-cards-container" class="grid">
                    <!-- Dynamically loaded cards will be appended here by JavaScript -->
                </div>

            </div>
        </div>
<!-- Resources JSON Data -->
<script src="resourcesData.js"></script>
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- Bootstrap 5 JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.bundle.min.js" integrity="sha512-7Pi/otdlbbCR+LnW+F7PwFcSDJOuUJB3OxtEHbg4vSMvzvJjde4Po1v4BR9Gdc9aXNUNFVUY+SK51wWT8WF0Gg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- jQuery Easing -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js" integrity="sha512-0QbL0ph8Tc8g5bLhfVzSqxe9GERORsKhIn1IrpxDAgUsbBGz/V7iSav2zzW325XGd1OMLdL4UiqRJj702IeqnQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- Custom Script -->
<script>
    $(document).ready(function() {
        // Function to create Google Maps URL
        function createGoogleMapsUrl(name, address, city, state, zip) {
            const query = `${name}, ${address}, ${city}, ${zip}`;
            return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(query)}`;
        }

        // Function to format phone number
        function formatPhoneNumber(phone) {
            return "+1" + phone.replace(/-/g, "");
        }

        // Function to generate resource cards
        function generateResourceCards() {
            jsonData.forEach((item) => {
                const formattedPhoneNumber = formatPhoneNumber(item.Phone);
                item.phoneLink = `tel:${formattedPhoneNumber}`;
                const googleMapsUrl = createGoogleMapsUrl(item["Location Name"], item.Address, item.City, item.State, item["Zip Code"]);

                const populations = item["Populations Served"].split(";").map(
                    (pop) => `<span class="badge text-black bg-pink py-2 js-badge" data-filter="population" data-value="${pop.trim()}">${pop.trim()}</span>`).join(" ");
                const counties = item["County"].split(";").map(
                    (county) => `<span class="badge text-black bg-pink py-2 my-1 js-badge" data-filter="county" data-value="${county.trim()}">${county.trim()} County</span>`).join(" ");
                const card = `
    <div class="g-col-12 js-filter-item" data-county="${item.County}" data-domain="${item.Domain}" data-category="${item.Category}" data-population="${item["Populations Served"]}">
        <div class="card shadow-lg text-bg-white br-5-5-5-5">
            <div class="row no-gutters p-0">
                <div class="card-sidenav col-2 d-flex flex-column justify-content-between align-items-center p-0">
                    <a href="${item.Website}" class="d-flex align-items-center justify-content-center flex-grow-1 w-100 text-white"> <i class="bi bi-globe"></i> </a>
                    <a href="${item.phoneLink}" class="d-flex align-items-center justify-content-center flex-grow-1 w-100 text-white"> <i class="bi bi-telephone-fill"></i> </a>
                    <a href="${googleMapsUrl}" class="d-flex align-items-center justify-content-center flex-grow-1 w-100 text-white"> <i class="bi bi-geo-alt-fill"></i> </a>
                </div>
                <div class="card-body col-10 p-4">
                    <div class="row">
                    </div>
                        <h3 class="text-secondary" style="font-weight:400;margin-bottom:0;line-height:1.2em;font-size:36px">${item["Location Name"]}</h3>
                        <h5 style="font-weight:100;margin-top:0;font-size:18px">${item.Organization}</h5>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="cardbreadcrumb-item"> <span class="badge text-black bg-pink py-2 my-1 js-badge" data-filter="domain" data-value="${item.Domain}">
                                            ${item.Domain}
                                            </span> </li>
                                <li class="cardbreadcrumb-item"> <span class="badge text-black bg-pink py-2 my-1 js-badge" data-filter="category" data-value="${item.Category}">
                                            ${item.Category}
                                            </span> </li>
                            </ol>
                        </nav>
                        <div class="row d-flex justify-content-md-end justify-content-sm-center position-relative"> ${item.Image ? `<img class="cardImage" src="${item.Image}" alt="Logo">` : ""} </div>
                        <p><strong>Phone:</strong> ${item.Phone}</p>
                        <p>${item.Address}
                            <br />${item.City}, ${item.State} ${item["Zip Code"]}</p>
                        <p><strong>Populations Served:</strong> ${populations}</p>
                        <p><strong>Counties Served:</strong> ${counties}</p>
                </div>
            </div>
        </div>
    </div>
                `;
                $(".grid").append(card);
            });

            updateResourceCount();
        }

        // Function to update the resource count
        function updateResourceCount() {
            const totalItems = jsonData.length;
            $("#resource-count").text(`Showing all ${totalItems} resources`);
        }

        // Initial load
        generateResourceCards();
    });
</script>
</body>
</html>